---
title: 以字符串方式写文件
author: 李述铜
createTime: 2024/08/08 10:30:41
permalink: /tech/fatfs/03wplvzz/
---
:::tip
同学，你好，欢迎学习本课程！本课程是介绍了FATFS文件系统模块的基本使用，是一门相对较简单的课程。

如果你对文件系统的实现比较感兴趣，也可以关注我的《[从0到1写FAT32文件系统](https://wuptg.xetlk.com/s/VeHie)》课程。

欢迎转载本文章，转载请注明链接来源，谢谢！
:::

本小节介绍以字符串的方式写入字符串，其与前面介绍地f_gets()函数功能正好相反。

## 接口介绍
### 写字符串
f_puts函数向文件写入一个字符串。
```c
int f_puts(
  const TCHAR* str, /* [IN] 字符串 */
  FIL* fp           /* [IN] 文件对象 */
);
```
参数

- `str`: 指向要写入的以空字符终止的字符串的指针
- `fp`: 指向打开的文件对象结构的指针。

返回值

- 当字符串成功写入文件时，返回写入文件的字符编码单元数。当由于磁盘已满或出现任何错误而失败时，将返回负值。
- f_putc函数将一个字符写入文件。
### 写字符
```c
int f_putc(
  TCHAR chr,  /* [IN] 要写入的字符 */
  FIL* fp     /* [IN] 文件对象 */
);
```
参数

- `chr`: 要写入的字符。
- `fp`: 指向打开的文件对象结构的指针。
- 
## 注意事项
与f_gets()相同，f_puts()也存在\r\n转换的问题。只不过是在写入时，碰到\n是否会转换成\r\n。该功能的配置方法与f_gets()的配置相同。
